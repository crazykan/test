(function(){APPMarket.Backend.BackendApp.controller("CategoryController",["$scope","$timeout","blockUI","ApiFactory","ListingService","SystemFactory","SweetAlertService",function(e,t,a,s,r,i,n){var l;return l=function(){function a(){e.resources=APPMarket.Resources,e.vars=APPMarket.Vars,e.link={root:e.resources.root,subCatRoot:e.resources.subCatRoot,lists:e.resources.subindex,bulk_deletion:e.resources.bulk_deletion},e.blockUI=e.blockui("blockui-effect"),e.details={},e.per_page=20,e.letters=e.vars.alpha,e.details.parent_category_id=e.vars.parentCatId,0===e.vars.hash_id&&0===e.vars.is_create?(e.pagePresetKey="appmarket-parent-category-page",e=angular.extend(e,r,{getCollections:function(t){return e.getOrderLists(t)}}),e.loadCollections()):(e.details.is_enabled=!0,0===e.vars.is_create&&e.getDetail())}return e.getDetail=function(){return e.blockUI.start("Please Wait . . ."),e.details.user_id=APPMarket.user_id,s.sendRequest({},e.link.lists+"/"+e.vars.hash_id+"?parent_category_id="+e.vars.parentCatId,"GET").then(function(t){var a;return"error"===t.data.status?(e.alertMsg({msg:t.data.message}),e.blockUI.stop()):(a=t.data.data,e.details=a,e.details.is_enabled=1===e.details.is_enabled,e.details.is_featured=1===e.details.is_featured,e.blockUI.stop())})["catch"](function(a){if("error"===a.data.status)return e.alertMsg({msg:"No query results found, You will be redirected back in 2 seconds..."}),t(function(){return window.location.href=e.link.subCatRoot+"/"+e.vars.parentCatId},2e3)})},e.create=function(t){var a;try{return e.details.user_id=APPMarket.user_id,i.validateObj(e.details,["title","description","user_id"]),e.details.is_enabled=e.details.is_enabled===!0?1:0,e.blockUI.start("Please Wait . . ."),s.sendRequest(e.details,e.link.lists+"?parent_category_id="+e.vars.parentCatId,"POST").then(function(t){var a;return"error"===t.data.status?(e.alertMsg({msg:t.data.message}),e.blockUI.stop()):(a=t.data,window.location.href=a.data.backend_detail_url,e.blockUI.stop())})}catch(r){return a=r,e.alertMsg({msg:a})}},a}(),e.update=function(t){var a;try{return e.details.user_id=APPMarket.user_id,i.validateObj(e.details,["title","identifier","description","user_id"]),e.details.is_draft=angular.isDefined(t)?t:0,e.details.is_enabled=e.details.is_enabled===!0?1:0,e.details.is_featured=e.details.is_featured===!0?1:0,e.blockUI.start("Please Wait . . ."),s.sendRequest(e.details,e.link.lists+"/"+e.vars.hash_id+"?parent_category_id="+e.vars.parentCatId,"PUT").then(function(t){var a;return"error"===t.data.status?(e.alertMsg({msg:t.data.message}),e.blockUI.stop()):(a=t.data,window.location.reload(),e.blockUI.stop())})}catch(r){return a=r,e.alertMsg({msg:a})}},e.loadCollections=function(){return t(function(){var t;return t=_h.get(e.pagePresetKey)||1,""!==e.details.search&&(t=1),e.getCollections(t)})},e.getOrderLists=function(a){var s,r,i,n;return a=a||1,e.blockUI.start("Please Wait . . ."),_h.set(e.pagePresetKey,a),e.details.per_page=angular.isUndefined(e.details.per_page)?e.per_page:e.details.per_page,e.details.search=angular.isUndefined(e.details.search)?"":e.details.search,n="&search="+e.details.search,r="&per_page="+e.details.per_page,s="&parent_category_id="+e.details.parent_category_id,i=e.link.lists+"?page="+a+n+r+s,e.requestData(i,"GET").success(function(a){return null!=a.data?angular.bind(e,e.dataHandler(a)):(_h.set(e.pagePresetKey,1),e.data=[],e.range=[],e.totalPages=0),t(function(){return e.blockUI.stop()},500)})},e.delRequest=function(t){return e.blockUI.start("Please Wait . . ."),s.sendRequest({},e.link.lists+"/"+t.id,"DELETE").then(function(t){return"error"===t.data.status?e.alertMsg({msg:t.data.message}):(e.alertMsg({msg:t.data.message,success:!0}),window.location.href=e.link.subCatRoot+"/"+e.vars.parentCatId),e.blockUI.stop()})},e.delModal=function(t){var a;return a={title:"Please Confirm",text:_h.sprintf("Do you want to delete this page (<strong>%s</strong>)?",t.title),html:!0,showCancelButton:!0,cancelButtonText:"Cancel"},n.swal(a,function(a){if(a)return e.delRequest(t)})},e.alertMsg=function(e){var t,a;return a={title:"System Response",msg:"Problem in your request!"},t=angular.merge(a,e),t.success===!0?n.success(t.title,t.msg):n.error(t.title,t.msg)},e.blockui=function(e){return a.instances.get(e)},new l}])}).call(this),function(){APPMarket.Backend.BackendApp.controller("ParentCategoryController",["$scope","$timeout","blockUI","ApiFactory","ListingService","SystemFactory","SweetAlertService",function(e,t,a,s,r,i,n){var l;return l=function(){function a(){e.resources=APPMarket.Resources,e.vars=APPMarket.Vars,e.link={root:e.resources.root,lists:e.resources.index},e.blockUI=e.blockui("blockui-effect"),e.details={},e.per_page=20,e.letters=e.vars.alpha,0===e.vars.hash_id&&0===e.vars.is_create?(e.pagePresetKey="appmarket-parent-category-page",e=angular.extend(e,r,{getCollections:function(t){return e.getOrderLists(t)}}),e.loadCollections()):(e.details.is_enabled=!0,0===e.vars.is_create&&e.getDetail())}return e.getDetail=function(){return e.blockUI.start("Please Wait . . ."),e.details.user_id=APPMarket.user_id,s.sendRequest({},e.link.lists+"/"+e.vars.hash_id,"GET").then(function(t){var a;return"error"===t.data.status?(e.alertMsg({msg:t.data.message}),e.blockUI.stop()):(a=t.data.data,e.details=a,e.details.is_enabled=1===e.details.is_enabled,e.blockUI.stop())})["catch"](function(a){if("error"===a.data.status)return e.alertMsg({msg:"No query results found, You will be redirected back in 2 seconds..."}),t(function(){return window.location.href=e.link.root},2e3)})},e.create=function(t){var a;try{return e.details.user_id=APPMarket.user_id,i.validateObj(e.details,["title","description","user_id"]),e.details.is_enabled=e.details.is_enabled===!0||1===e.details.is_enabled?1:0,e.blockUI.start("Please Wait . . ."),s.sendRequest(e.details,e.link.lists,"POST").then(function(t){var a;return"error"===t.data.status?(e.alertMsg({msg:t.data.message}),e.blockUI.stop()):(a=t.data,window.location.href=a.data.backend_detail_url,e.blockUI.stop())})}catch(r){return a=r,e.alertMsg({msg:a})}},a}(),e.update=function(){var t;try{return e.details.user_id=APPMarket.user_id,i.validateObj(e.details,["title","description","user_id"]),e.details.is_enabled=e.details.is_enabled===!0?1:0,e.blockUI.start("Please Wait . . ."),s.sendRequest(e.details,e.link.lists+"/"+e.vars.hash_id,"PUT").then(function(t){var a;return"error"===t.data.status?(e.alertMsg({msg:t.data.message}),e.blockUI.stop()):(a=t.data,window.location.reload(),e.blockUI.stop())})}catch(a){return t=a,e.alertMsg({msg:t})}},e.loadCollections=function(){return t(function(){var t;return t=_h.get(e.pagePresetKey)||1,""!==e.details.search&&(t=1),e.getCollections(t)})},e.getOrderLists=function(a){var s,r,i;return a=a||1,e.blockUI.start("Please Wait . . ."),_h.set(e.pagePresetKey,a),e.details.per_page=angular.isUndefined(e.details.per_page)?e.per_page:e.details.per_page,e.details.search=angular.isUndefined(e.details.search)?"":e.details.search,i="&search="+e.details.search,s="&per_page="+e.details.per_page,r=e.link.lists+"?page="+a+i+s,e.requestData(r,"GET").success(function(a){return null!=a.data?angular.bind(e,e.dataHandler(a)):(_h.set(e.pagePresetKey,1),e.data=[],e.range=[],e.totalPages=0),t(function(){return e.blockUI.stop()},500)})},e.delRequest=function(t){return e.blockUI.start("Please Wait . . ."),s.sendRequest({},e.link.lists+"/"+t.id,"DELETE").then(function(t){return"error"===t.data.status?e.alertMsg({msg:t.data.message}):(e.alertMsg({msg:t.data.message,success:!0}),window.location.href=e.link.root),e.blockUI.stop()})},e.delModal=function(t){var a;return a={title:"Please Confirm",text:_h.sprintf("Do you want to delete this page (<strong>%s</strong>)?",t.title),html:!0,showCancelButton:!0,cancelButtonText:"Cancel"},n.swal(a,function(a){if(a)return e.delRequest(t)})},e.alertMsg=function(e){var t,a;return a={title:"System Response",msg:"Problem in your request!"},t=angular.merge(a,e),t.success===!0?n.success(t.title,t.msg):n.error(t.title,t.msg)},e.blockui=function(e){return a.instances.get(e)},new l}])}.call(this);