(function(){APPMarket.Backend.BackendApp.controller("SubmittedAppController",["$scope","$rootScope","$timeout","blockUI","ApiFactory","ListingService","SystemFactory","SweetAlertService","UploaderFactory",function(e,t,r,a,s,n,l,i,o){var c;return new(c=function(){function t(){e.resources=APPMarket.Resources,e.vars=APPMarket.Vars,e.link={root:e.resources.root,lists:e.resources.index},e.blockUI=e.blockui("blockui-effect"),e.blockSearchUI=e.blockui("search-result"),e.details={},e.per_page=50,e.letters=e.vars.alpha,e.categoryObj={list:[]},0===e.vars.hash_id&&0===e.vars.is_create&&(e.details={per_page:50,search:"",letter:""},e.pagePresetKey="appmarket-page",e=angular.extend(e,n,{getCollections:function(t){return e.getOrderLists(t)}}),e.loadCollections())}return e.loadCollections=function(){return r(function(){var t;return t=_h.get(e.pagePresetKey)||1,""!==e.details.search&&(t=1),e.getCollections(t)})},e.getOrderLists=function(t){var a,s,n,l,i;return t=t||1,e.blockUI.start("Please Wait . . ."),_h.set(e.pagePresetKey,t),e.details.per_page=angular.isUndefined(e.details.per_page)?e.per_page:e.details.per_page,e.details.search=angular.isUndefined(e.details.search)?"":e.details.search,l="&search="+e.details.search,s="&per_page="+e.details.per_page,a="&letter="+e.details.letter,i="&is_submitted=yes",n=e.link.lists+"?page="+t+l+a+s+i,e.requestData(n,"GET").success(function(t){return null!=t.data?angular.bind(e,e.dataHandler(t)):(_h.set(e.pagePresetKey,1),e.data=[],e.range=[],e.totalPages=0),r(function(){return e.blockUI.stop()},500)})},e.delRequest=function(t,r){return e.blockUI.start("Please Wait . . ."),s.sendRequest({},e.link.lists+"/"+t.id,"DELETE").then(function(t){return"error"===t.data.status?e.alertMsg({msg:t.data.message}):(e.alertMsg({msg:t.data.message,success:!0}),window.location.reload()),e.blockUI.stop()})},e.delModal=function(t,r){var a;return a={title:"Please Confirm",text:_h.sprintf("Do you want to delete this page (<strong>%s</strong>)?",t.title),html:!0,showCancelButton:!0,cancelButtonText:"Cancel"},i.swal(a,function(a){if(a)return e.delRequest(t,r)})},e.alertMsg=function(e){var t,r;return r={title:"System Response",msg:"Problem in your request!"},t=angular.merge(r,e),t.success===!0?i.success(t.title,t.msg):i.error(t.title,t.msg)},e.removeItem=function(t,r){return angular.isDefined(r)?"apk-update"===r?e.apkFile.file={}:void 0:(t.id&&e.deleteFile(e.link.app_remove_upload+"/"+t.id),"app-image"===t.upload_type&&(e.details.app_image=""),r=e.details.screenshots.indexOf(t),e.details.screenshots.splice(r,1))},e.deleteFile=function(t){return s.sendRequest({},t,"POST").then(function(e){return window.location.reload()},function(t){return alert(t.data.message),e.myBlockUI.stop()})},e.search=function(){return e.loadCollections()},e.clearAll=function(){return e.details={search:"",letter:"",per_page:50},e.loadCollections()},e._slug=function(e){return e.toString().toLowerCase().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")},e.perPageChange=function(t){return e.details.per_page=t,e.loadCollections()},e.statusChange=function(){return e.isEdit=!1},e.letterFilter=function(t){return e.details.letter=t,e.loadCollections()},e.blockui=function(e){return a.instances.get(e)},t}())}])}).call(this);