(function(){APPMarket.Backend.BackendApp.controller("FeaturedAppController",["$scope","$rootScope","$timeout","blockUI","ApiFactory","ListingService","SystemFactory","SweetAlertService","UploaderFactory",function(e,t,r,a,s,o,n,l,i){var c;return new(c=function(){function t(){e.resources=APPMarket.Resources,e.vars=APPMarket.Vars,e.link={root:e.resources.root,lists:e.resources.index,addToFeaturedItem:e.resources.addToFeaturedItem,removeToFeaturedItem:e.resources.removeToFeaturedItem},e.blockUI=e.blockui("blockui-effect"),e.blockSearchUI=e.blockui("search-result"),e.details={},e.per_page=50,e.letters=e.vars.alpha,e.details={per_page:50,search:"",letter:""},e.pagePresetKey="appmarket-page",e=angular.extend(e,o,{getCollections:function(t){return e.getOrderLists(t)}}),e.loadCollections()}return e.loadCollections=function(){return r(function(){var t;return t=_h.get(e.pagePresetKey)||1,""!==e.details.search&&(t=1),e.getCollections(t)})},e.getOrderLists=function(t){var a,s,o,n,l;return t=t||1,e.blockUI.start("Please Wait . . ."),_h.set(e.pagePresetKey,t),e.details.per_page=angular.isUndefined(e.details.per_page)?e.per_page:e.details.per_page,e.details.search=angular.isUndefined(e.details.search)?"":e.details.search,l="&search="+e.details.search,o="&per_page="+e.details.per_page,s="&letter="+e.details.letter,a="&is_featured=yes",n=e.link.lists+"?page="+t+l+s+o+a,e.requestData(n,"GET").success(function(t){return null!=t.data?angular.bind(e,e.dataHandler(t)):(_h.set(e.pagePresetKey,1),e.data=[],e.range=[],e.totalPages=0),r(function(){return e.blockUI.stop()},500)})},e.addAllSelected=function(){var t;return t=[],angular.forEach(e.data,function(e,r){if(e.is_featured===!0)return t.push(e.id)}),s.sendRequest({items:t},e.link.addToFeaturedItem,"POST").then(function(t){return"error"===t.data.status?(e.alertMsg({msg:t.data.message}),e.blockUI.stop()):(window.location.reload(),e.blockUI.stop())})["catch"](function(t){if("error"===t.data.status)return e.alertMsg({msg:"No query results found, You will be redirected back in 2 seconds..."})})},e["delete"]=function(t){return s.sendRequest({id:t},e.link.removeToFeaturedItem,"POST").then(function(t){return"error"===t.data.status?(e.alertMsg({msg:t.data.message}),e.blockUI.stop()):(window.location.reload(),e.blockUI.stop())})["catch"](function(t){if("error"===t.data.status)return e.alertMsg({msg:"No query results found, You will be redirected back in 2 seconds..."})})},e.alertMsg=function(e){var t,r;return r={title:"System Response",msg:"Problem in your request!"},t=angular.merge(r,e),t.success===!0?l.success(t.title,t.msg):l.error(t.title,t.msg)},e.search=function(){return e.loadCollections()},e.clearAll=function(){return e.details={search:"",letter:"",per_page:50},e.loadCollections()},e.perPageChange=function(t){return e.details.per_page=t,e.loadCollections()},e.letterFilter=function(t){return e.details.letter=t,e.loadCollections()},e.blockui=function(e){return a.instances.get(e)},t}())}])}).call(this);